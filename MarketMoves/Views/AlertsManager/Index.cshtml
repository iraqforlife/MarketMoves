@using MarketMoves.Models.Enums

@model IEnumerable<MarketMoves.Models.Alert>
@{
    ViewData["Title"] = "Alerts";
}

<div class="container">
    <div name="header" class="">
        <h1 class="d-inline">Alerts</h1>
        <a class="btn btn-primary float-right"  asp-action="Create">Add an alert</a>
    </div>
    <div name="Today" class="table-responsive">
        <h1>Today</h1>
        <table class="table data-table table-dark text-center table-bordered">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Status</th>
                    <th>Entry Price</th>
                    <th>Exit</th>
                </tr>
            </thead>
            <tbody>
                @foreach (Alert alert in Model)
                {
                    <tr>
                        <td> <a asp-controller="Alerts" asp-action="Details" asp-route-id="@alert.Id">@alert.Title</a></td>
                        <td>@alert.Status.GetDescription()</td>
                        <td>@alert.Entry</td>
                        <td>@alert.ProfitPrice : @alert.LossPrice</td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@alert.Id" data-toggle="tooltip" title="Edit trade"><i class="fas fa-pen"></i></a>
                            |
                            @if (alert.Status == AlertStatus.OnDeck)
                            {
                                <a asp-action="Delete" asp-route-id="@alert.Id" data-toggle="tooltip" title="Open trade"><i class="fas fa-sign-in-alt"></i></a>
                            } else if (alert.Status == AlertStatus.Executed)
                            {
                                <a asp-action="Delete" asp-route-id="@alert.Id" data-toggle="tooltip" title="Close trade"><i alt="Close trade" class="fas fa-sign-out-alt"></i></a>   
                            }   
                            |
                            <a asp-action="Delete" asp-route-id="@alert.Id" data-toggle="tooltip" title="Delete trade"><i alt="Delete trade" class="fas fa-trash"></i></a>
                        </td>

                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
<script>
$(document).ready(function(){
  $('[data-toggle="tooltip"]').tooltip();
});
</script>