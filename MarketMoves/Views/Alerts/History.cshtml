@using MarketMoves.Models.Enums

@model IEnumerable<MarketMoves.Models.Alert>
@{
    ViewData["Title"] = "Alerts";
}

<div class="container">
    <div name="header" class="">
        <h1 class="d-inline">History</h1>
    </div>
    <div class="table-responsive">
        <table class="table data-table table-dark text-center table-bordered">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Status</th>
                    <th>Entry Price</th>
                    <th>Profit target</th>
                    <th>Loss price</th>
                    <th>Executed price</th>
                </tr>
            </thead>
            <tbody>
                @foreach (Alert alert in Model.Where(a=>a.Status==AlertStatus.Closed))
                {
                    <tr data-id="@alert.Id">
                        <td> <a asp-controller="Alerts" asp-action="Details" asp-route-id="@alert.Id">@alert.Title</a></td>
                        <td name="status">@alert.Status</td>
                        <td>@alert.Entry</td>
                        <td>@alert.ProfitPrice </td>
                        <td>@alert.LossPrice</td>
                        <td name="executedPrice">
                            @if (alert.Status == AlertStatus.Executed)
                            {
                                <p>@alert.ExecutedEntry.ToString()</p>

                            }
                            else if (alert.Status == AlertStatus.Closed)
                            {
                                <p>@alert.ExecutedExit.ToString()</p>
                            }
                            else
                            {
                                <p>0</p>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>